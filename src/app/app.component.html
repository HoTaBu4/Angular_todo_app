<div class="task-page container py-5">
  <header class="task-header d-flex flex-wrap align-items-center justify-content-between gap-3 mb-4">
    <div>
      <h1 class="task-title mb-1">Lista zadań</h1>
      <p class="task-subtitle text-body-secondary mb-0">
        Śledź swoje działania na dziś i szybko aktualizuj ich status.
      </p>
    </div>
    <button class="btn btn-primary" type="button" (click)="openAddModal()">
      Dodaj zadanie
    </button>
  </header>

  <app-task-filters
    [filters]="filters"
    [statusOptions]="statusOptions"
    [statusLabels]="statusLabels"
    (filtersChange)="onFiltersChange($event)"
    (clearRequested)="clearFilters()">
  </app-task-filters>

  @if (filteredTasks.length === 0) {
    <div class="task-empty text-center text-body-secondary py-5">
      <p class="mb-2 fw-semibold">Brak zadań spełniających kryteria.</p>
      <p class="mb-0">Spróbuj zmienić filtry, aby zobaczyć inne wyniki.</p>
    </div>
  } @else {
    <app-task-list
      [tasks]="filteredTasks"
      [badgeClassMap]="badgeClassMap"
      (completedToggled)="toggleCompleted($event)"
      (descriptionToggled)="toggleDescription($event)">
    </app-task-list>
  }

  <app-task-modal
    [isOpen]="isAddModalOpen"
    [statusOptions]="addTaskStatusOptions"
    [statusLabels]="statusLabels"
    (cancel)="handleModalCancelled()"
    (create)="handleTaskCreated($event)">
  </app-task-modal>
</div>
